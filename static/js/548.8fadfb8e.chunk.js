"use strict";(self.webpackChunkrandomanime=self.webpackChunkrandomanime||[]).push([[548],{9548:function(e,t,a){a.r(t),a.d(t,{SSAParser:function(){return b},default:function(){return y}});var s=a(1413),i=a(4165),n=a(5861),r=a(5671),l=a(3144),c=a(4630),o=/^Format:[\s\t]*/,u=/^Style:[\s\t]*/,h=/^Dialogue:[\s\t]*/,p=/[\s\t]*,[\s\t]*/,f=/\{[^}]+\}/g,v=/\\N/g,d=/^\[(.*)[\s\t]?Styles\]$/,k=/^\[(.*)[\s\t]?Events\]$/,b=function(){function e(){(0,r.Z)(this,e),this.m=0,this.a=null,this.d=[],this.p=[],this.j=null,this.K={}}return(0,l.Z)(e,[{key:"init",value:function(){var e=(0,n.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.f=t,!t.errors){e.next=5;break}return e.next=4,a.e(476).then(a.bind(a,476));case 4:this.e=e.sent.ParseErrorBuilder;case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parse",value:function(e,t){if(this.m)switch(this.m){case 1:if(""===e)this.m=0;else if(u.test(e))if(this.j){var a=e.replace(u,"").split(p);this.U(a)}else{var s;this.h(null===(s=this.e)||void 0===s?void 0:s.H("Style",t))}else o.test(e)?this.j=e.replace(o,"").split(p):k.test(e)&&(this.j=null,this.m=2);break;case 2:if(""===e)this.L();else if(h.test(e))if(this.L(),this.j){var i=e.replace(h,"").split(p),n=this.V(i,t);n&&(this.a=n)}else{var r;this.h(null===(r=this.e)||void 0===r?void 0:r.H("Dialogue",t))}else this.a?this.a.text+="\n"+e.replace(f,"").replace(v,"\n"):o.test(e)?this.j=e.replace(o,"").split(p):d.test(e)?(this.j=null,this.m=1):k.test(e)&&(this.j=null)}else""===e||(d.test(e)?(this.j=null,this.m=1):k.test(e)&&(this.j=null,this.m=2))}},{key:"done",value:function(){return{metadata:{},cues:this.d,regions:[],errors:this.p}}},{key:"L",value:function(){var e,t;this.a&&(this.d.push(this.a),null===(e=(t=this.f).onCue)||void 0===e||e.call(t,this.a),this.a=null)}},{key:"U",value:function(e){for(var t,a,s,i,n="Default",r={},l="center",c="bottom",o=1.2,u=3,h=[],p=0;p<this.j.length;p++){var f=this.j[p],v=e[p];switch(f){case"Name":n=v;break;case"Fontname":r["font-family"]=v;break;case"Fontsize":r["font-size"]="calc(".concat(v," / var(--overlay-height))");break;case"PrimaryColour":var d=g(v);d&&(r["--cue-color"]=d);break;case"BorderStyle":u=parseInt(v,10);break;case"BackColour":i=g(v);break;case"OutlineColour":var k=g(v);k&&(s=k);break;case"Bold":parseInt(v)&&(r["font-weight"]="bold");break;case"Italic":parseInt(v)&&(r["font-style"]="italic");break;case"Underline":parseInt(v)&&(r["text-decoration"]="underline");break;case"StrikeOut":parseInt(v)&&(r["text-decoration"]="line-through");break;case"Spacing":r["letter-spacing"]=v+"px";break;case"AlphaLevel":r.opacity=parseFloat(v);break;case"ScaleX":h.push("scaleX(".concat(parseFloat(v)/100,")"));break;case"ScaleY":h.push("scaleY(".concat(parseFloat(v)/100,")"));break;case"Angle":h.push("rotate(".concat(v,"deg)"));break;case"Shadow":o=1.2*parseInt(v,10);break;case"MarginL":r["--cue-width"]="auto",r["--cue-left"]=parseFloat(v)+"px";break;case"MarginR":r["--cue-width"]="auto",r["--cue-right"]=parseFloat(v)+"px";break;case"MarginV":a=parseFloat(v);break;case"Outline":t=parseInt(v,10);break;case"Alignment":var b=parseInt(v,10);switch(b>=4&&(c=b>=7?"top":"center"),b%3){case 1:l="start";break;case 2:l="center";break;case 3:l="end"}}}if(r.M=c,r["--cue-white-space"]="normal",r["--cue-line-height"]="normal",r["--cue-text-align"]=l,"center"===c?(r["--cue-top"]="50%",h.push("translateY(-50%)")):r["--cue-".concat(c)]=(a||0)+"px",1===u&&(r["--cue-padding-y"]="0"),(1===u||i)&&(r["--cue-bg-color"]=1===u?"none":i),3===u&&s&&(r["--cue-outline"]="".concat(t,"px solid ").concat(s)),1===u&&"number"===typeof t){var y,j=null!==(y=i)&&void 0!==y?y:"#000";r["--cue-text-shadow"]=[s&&m(1.2*t,1.2*o,s),s?m(t*(t/2),o*(t/2),j):m(t,o,j)].filter(Boolean).join(", ")}h.length&&(r["--cue-transform"]=h.join(" ")),this.K[n]=r}},{key:"V",value:function(e,t){var a=this.W(e),i=this.o(a.Start,a.End,t);if(i){var n=new c.tx(i[0],i[1],""),r=(0,s.Z)({},this.K[a.Style]||{}),l=a.Name?"<v ".concat(a.Name,">"):"",o=r.M,u=a.MarginL&&parseFloat(a.MarginL),h=a.MarginR&&parseFloat(a.MarginR),p=a.MarginV&&parseFloat(a.MarginV);return u&&(r["--cue-width"]="auto",r["--cue-left"]=u+"px"),h&&(r["--cue-width"]="auto",r["--cue-right"]=h+"px"),p&&"center"!==o&&(r["--cue-".concat(o)]=p+"px"),n.text=l+e.slice(this.j.length-1).join(", ").replace(f,"").replace(v,"\n"),delete r.M,Object.keys(r).length&&(n.style=r),n}}},{key:"W",value:function(e){for(var t={},a=0;a<this.j.length;a++)t[this.j[a]]=e[a];return t}},{key:"o",value:function(e,t,a){var s,i,n,r=(0,c.OZ)(e),l=(0,c.OZ)(t);if(null!==r&&null!==l&&l>r)return[r,l];null===r&&this.h(null===(s=this.e)||void 0===s?void 0:s.E(e,a)),null===l&&this.h(null===(i=this.e)||void 0===i?void 0:i.F(t,a)),null!=r&&null!==l&&l>r&&this.h(null===(n=this.e)||void 0===n?void 0:n.G(r,l,a))}},{key:"h",value:function(e){if(e){if(this.p.push(e),this.f.strict)throw this.f.cancel(),e;var t,a;null===(t=(a=this.f).onError)||void 0===t||t.call(a,e)}}}]),e}();function g(e){var t=parseInt(e.replace("&H",""),16);return t>=0?"rgba("+[255&t,t>>8&255,t>>16&255,(t>>24&255^255)/255].join(",")+")":null}function m(e,t,a){for(var s=Math.ceil(2*Math.PI*e),i="",n=0;n<s;n++){var r=2*Math.PI*n/s;i+=e*Math.cos(r)+"px "+t*Math.sin(r)+"px 0 "+a+(n==s-1?"":",")}return i}function y(){return new b}}}]);
//# sourceMappingURL=548.8fadfb8e.chunk.js.map